---
title: "Assignment 1"
format: html
editor: visual
author: Namra Shahid
author2: Marit Rygg Fredheim
bibliography: 
csl: apa-no-ampersand.csl
---

```{r}
library(readr)
gdpfile <- read.csv('nama_10r_3gdp_group2.csv')
populationfile <- read_csv("demo_r_pjanaggr3__custom_3558281_linear.csv")
View(demo_r_pjanaggr3_custom_3558281_linear)

gdpdata <- gdpfile %>%
  rename(Year = TIME_PERIOD, GDP = OBS_VALUE, Country = geo)

populationdata <- populationfile %>% 
  rename(Year = TIME_PERIOD, Population = OBS_VALUE, Country = geo)

mydata <- gdpdata %>%
  #select only colums we need
  select(Year, Country, GDP, unit) %>%
  #select rows with MIO_EUR and the countries we need
  filter(unit =='MIO_EUR' & Country %in% c('DE', 'FI', 'RO'))

mydata <- mydata %>%
  #combine gdpr data with population data with the same year and country
  left_join(populationdata, by=c("Year", "Country"), 
            suffix = c("", "_population")) %>%
  # only rows with TOTAL and T from the population data
  filter(age=='TOTAL' & sex=='T')
```

```{r}
mydata <- mydata %>%
  #select the fields that we need
  select(Year, Country, GDP, Population) %>%
  mutate(GDPpercapita = 1000000 * GDP / Population)
```
